(window.webpackJsonpwebapp1=window.webpackJsonpwebapp1||[]).push([[0],{103:function(e,t,n){var r={"./Api1":28,"./Api1/":28,"./Api1/callbacks":24,"./Api1/callbacks.js":24,"./Api1/index":28,"./Api1/index.js":28,"./Api2":29,"./Api2/":29,"./Api2/apis":26,"./Api2/apis.js":26,"./Api2/callbacks":25,"./Api2/callbacks.js":25,"./Api2/index":29,"./Api2/index.js":29,"./Api3":30,"./Api3/":30,"./Api3/apis":27,"./Api3/apis.js":27,"./Api3/index":30,"./Api3/index.js":30,"./Common":31,"./Common/":31,"./Common/callbacks":18,"./Common/callbacks.js":18,"./Common/index":31,"./Common/index.js":31,"./Send":17,"./Send.js":17};function c(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}c.keys=function(){return Object.keys(r)},c.resolve=o,e.exports=c,c.id=103},105:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),o=n(61),a=n.n(o),i=n(2),u=n(62),s=n(12),l=n(6),p=n(41),b=n(42),f=n.n(b),O=n(63);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(n,!0).forEach(function(t){Object(s.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var y=function(e){var t=e.size,n=t.width,r=t.height,c=e.id,o=e.grayscale,a=e.blur,i=c?"https://picsum.photos/id/".concat(c,"/").concat(n,"/").concat(r,"/"):"https://picsum.photos/".concat(n,"/").concat(r,"/");return o&&(i="".concat(i,"?grayscale")),a&&(i="".concat(i,o?"&blur":"?blur")),i},w=function(){var e=Object(O.a)(f.a.mark(function e(t){var n,r,c,o,a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.lastRequestUrl,(r=y(t))!==n){e.next=4;break}return e.abrupt("return",t);case 4:return e.next=6,fetch(r);case 6:return c=e.sent,e.next=9,c.blob();case 9:return o=e.sent,a=c.url.split("/")[4],e.abrupt("return",j({},t,{lastRequestUrl:y(j({},t,{id:a})),id:a,url:URL.createObjectURL(o)}));case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();var h=function(){var e=function(){var e=Object(r.useState)({width:window.innerWidth,height:window.innerHeight}),t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)(function(){var e=function(){return c({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),n}(),t=Object(r.useState)({}),n=Object(i.a)(t,2),c=n[0],o=n[1],a=c.id,u=c.grayscale,s=c.blur;return Object(r.useEffect)(function(){w(j({},c,{size:e})).then(function(e){return o(e)})},[e,a,u,s]),[c,o]};function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(n,!0).forEach(function(t){Object(s.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var g=function(){console.log("render webapp1.Type1");var e=h(),t=Object(i.a)(e,2),n=t[0],o=t[1],a=n.url;return Object(r.useEffect)(function(){Object(p.setCallback)("photoSelected",function(e){return o(function(t){return v({},t,{id:e})})}),Object(l.setCallback)("displayGrayscale",function(e){return o(function(t){return v({},t,{grayscale:e})})}),Object(l.setCallback)("displayBlur",function(e){return o(function(t){return v({},t,{blur:e})})})},[o]),a?c.a.createElement("img",{src:a,alt:""}):null},k=n(64),E=n(43);n(60);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(n,!0).forEach(function(t){Object(s.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var C=function(e,t){var n=Object(r.useState)(e),c=Object(i.a)(n,2),o=c[0],a=c[1];return{value:o,onChange:function(e){var n=e.target.checked;a(n),t(n)},type:"checkbox"}},x=function(e){var t=e.canModPhotos;console.log("render webapp1.Type2");var n=h(),o=Object(i.a)(n,2),a=o[0],u=o[1],s=C(!1,E.setGrayscale),p=C(!1,E.setBlur),b=a.url,f=a.id;return Object(r.useEffect)(function(){Object(l.setCallback)("displayNewPhoto",function(){return u(function(e){return A({},e,{id:void 0})})}),Object(l.setCallback)("displayGrayscale",function(e){return u(function(t){return A({},t,{grayscale:e})})}),Object(l.setCallback)("displayBlur",function(e){return u(function(t){return A({},t,{blur:e})})})},[u]),b?c.a.createElement("div",{className:"container"},c.a.createElement("img",{src:b,alt:"",onClick:function(){return Object(k.photoClicked)(f)}}),t&&c.a.createElement("div",{className:"top-overlay"},c.a.createElement("label",null,"B/W:",c.a.createElement("input",s)),c.a.createElement("label",null,"Blur:",c.a.createElement("input",p)))):null},D=function(){console.log("webapp1 render");var e=Object(r.useState)(),t=Object(i.a)(e,2),n=t[0],o=t[1],a=Object(r.useState)(),s=Object(i.a)(a,2),l=s[0],p=s[1];return Object(r.useEffect)(function(){Object(u.startApis)("https://precor.github.io").then(function(e){var t=e.type,n=e.apis;p(!!n.find(function(e){return"Api3"===e})),o(t)})},[]),n?"LibType1"===n?c.a.createElement(g,null):c.a.createElement(x,{canModPhotos:l}):null};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(c.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},60:function(e,t,n){},65:function(e,t,n){e.exports=n(105)}},[[65,1,2]]]);
//# sourceMappingURL=main.567ff30c.chunk.js.map