(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,i){e.exports=i(18)},17:function(e,t,i){},18:function(e,t,i){"use strict";i.r(t);var n=i(0),a=i.n(n),r=i(8),o=i.n(r),c=i(10),s=i(3),p=i(5),l=i(4),d=i(2),u=i(6),b=i(1),h=i(9),f=i.n(h),m=(i(17),["https://precor.github.io/web-api-bridge/examples/react-multi/webapp1/build/#/page2/","https://precor.github.io/web-api-bridge/examples/react-multi/webapp1/build/#/page2/","https://precor.github.io/web-api-bridge/examples/react-multi/webapp2/build/","https://precor.github.io/web-api-bridge/examples/react-multi/webapp2/build/"]),w=[],g=function e(t){var i=this;Object(b.a)(this,e),this.setSend=function(e){i.send=e},this.photoSelected=function(e){i.send("photoSelected",[e],!1)},this.send=t},v=function e(t){var i=this;Object(b.a)(this,e),this.setSend=function(e){i.send=e},this.photoClicked=function(t){w.find(function(e){return e.props.api instanceof g}).props.api.photoSelected(t),w.forEach(function(t){t.props.api!==i&&t.props.api instanceof e&&t.props.api.displayNewPhoto()})},this.displayNewPhoto=function(){i.send("displayNewPhoto",null,!1)},this.send=t};window.addEventListener("message",function(e){if(e&&e.origin&&e.data&&"string"===typeof e.data){var t=w.find(function(t){return e.source===t.webApiBridge.ipc});t&&t.webApiBridge.onMessage(e,e.data)}});var O=function(e){function t(e){var i;Object(b.a)(this,t),(i=Object(p.a)(this,Object(l.a)(t).call(this,e))).setIframe=function(e){e&&!i.iframe&&(i.iframe=e,i.webApiBridge.ipc=e.contentWindow,i.iframe.onload=function(){console.log("".concat(e.src," loaded"))})};var n=i.props,a=n.src,r=n.api,o=new URL(a);return i.webApiBridge=new f.a,i.webApiBridge.origin=o.origin,i.webApiBridge.targetOrigin=o.origin,i.webApiBridge.apis=[r],r.setSend(i.webApiBridge.send.bind(i.webApiBridge)),w.push(Object(d.a)(i)),i.state={selectedPhoto:!1},i}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,i=t.src,n=(t.api,Object(c.a)(t,["src","api"]));return console.log("render iframe: ".concat(i)),a.a.createElement("iframe",Object.assign({src:i,title:i,ref:function(t){e.setIframe(t)},scrolling:"no"},n))}}]),t}(n.Component),j=function(e){function t(){return Object(b.a)(this,t),Object(p.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return console.log("render parent"),a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement(O,{className:"fullscreen-iframe",src:"https://precor.github.io/web-api-bridge/examples/react-multi/webapp1/build/#/page1/",api:new g})),a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"row"},m.map(function(e,t){return a.a.createElement(O,{className:"image-select",key:t,src:e,api:new v})})),a.a.createElement("div",{className:"overlay-text"},"Click on one of the 4 photos")))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[11,1,2]]]);
//# sourceMappingURL=main.a9a7a56c.chunk.js.map